% Section 3 - Docker Compose
% Roberto Masocco <roberto.masocco@uniroma2.it>
% May 1, 2022

% ### Docker Compose ###
\section{Docker Compose}
\graphicspath{{figs/section3/}}

% --- Composing Services ---
\begin{frame}{Composing Services}
\begin{columns}
  \column{.5\textwidth}
  Managing multiple, interdependent \textbg{containerized services} can become quite a tedious task.\\
  Each container may take multiple options, some have to be started in sequence or built in a particular way...\\
  \begin{block}{}
    \centering
    \textbf{Compose} is a utility that helps to \textbf{build}, \textbf{run} and \textbf{manage} multiplatform containers by parsing all such settings from \textbf{YAML configuration files}.
  \end{block}

  \column{.5\textwidth}
  \begin{figure}
    \centering
    \includegraphics[scale=.2]{composeLogo.png}
    \label{fig:compose}
    \caption{Docker Compose logo}
  \end{figure}
\end{columns}
\end{frame}

% --- Compose Files ---
\begin{frame}[fragile]{Compose Files}
\begin{columns}\column{.9\textwidth}
\begin{lstlisting}[language=compose, caption=Minimal example of a Compose file]
services:
  development:
    build:
      context: .
      args:
        TARGET: dev
    image: devenv:latest
    environment:
      TERM: xterm-256color
    network_mode: host
    command: ["/bin/zsh"]
    volumes:
      - ~/.ssh:/home/user/.ssh
\end{lstlisting}
\end{columns}
Refer to the \href{https://docs.docker.com/compose/compose-file/}{\color{blue}\underline{Compose reference}} for more.
\end{frame}

% --- Compose Commands ---
\begin{frame}{Compose Commands}
Pretty much the same that Docker has, but invoked with\\\vspace{2pt}
\texttt{docker-compose}\\\vspace{2pt}
and oriented only towards services specified in the local Compose file.\\
Consult the \href{https://docs.docker.com/compose/reference/}{\color{blue}\underline{CLI reference}} for more info.
\end{frame}

% --- Example: ROS 2 Development Environment ---
\begin{frame}{Example: ROS 2 Development Environment}
  Remember \href{https://github.com/IntelligentSystemsLabUTV/ros2-examples}{\color{blue}\underline{ros2-examples}}?\\
  It is a self-contained ROS 2 development environment built with Docker!\\
  Go check it out!
\end{frame}
